{"version":3,"sources":["../../dist/lib.js","myContextMenuBridge.ts","MyContextMenu.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["useContextMenu","bridge","useState","data","defaultData","clickPosition","x","y","open","state","setState","useEffect","listener","event","pageX","pageY","addListener","removeListener","ContextMenuBridge","this","hookListeners","push","index","indexOf","splice","menuListener","dispatch","forEach","handler","handleOpen","defaultPrevented","preventDefault","handleClose","forceClose","CMContext","createContext","doClose","doSelect","dark","ContextMenuOption","children","href","onClick","select","disabled","useContext","handleClick","e","jsx","onContextMenu","className","defaultProps","undefined","ContextMenuExpand","style","onSelect","text","optionRef","useRef","menuRef","relativePosition","setRelativePosition","expanded","setExpanded","useLayoutEffect","current","optionRect","getBoundingClientRect","menuRect","canGoRight","window","innerWidth","right","width","canGoDown","innerHeight","top","height","styles","Object","assign","display","left","Provider","value","action","jsxs","onMouseEnter","onMouseLeave","ref","position","fontSize","ContextMenu","anchorRef","handleOutsideClick","target","Element","contains","document","addEventListener","removeEventListener","anchorRect","xDir","pageXOffset","getXDirection","yDir","pageYOffset","getYDirection","anchored","Option","Divider","Expand","ContextMenuTriggerArea","props","other","s","t","p","prototype","hasOwnProperty","call","getOwnPropertySymbols","i","length","propertyIsEnumerable","__rest","myContextMenuBridge","changeColor","color","changeShape","shape","MyContextMenu","clipboard","setClipboard","darkMode","matchMedia","matches","Shape","setColor","setShape","newColor","App","rel","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.944af848.chunk.js","sourcesContent":["import { jsx, jsxs } from 'react/jsx-runtime';\nimport { useState, useEffect, createContext, useContext, useRef, useLayoutEffect } from 'react';\n\nconst useContextMenu = (bridge) => {\r\n    const [state, setState] = useState({\r\n        data: bridge.defaultData,\r\n        clickPosition: { x: 0, y: 0 },\r\n        open: false,\r\n    });\r\n    useEffect(() => {\r\n        // eslint-disable-next-line no-param-reassign\r\n        const listener = (event, data, open) => {\r\n            const clickPosition = { x: event.pageX, y: event.pageY };\r\n            setState({ data, clickPosition, open });\r\n            // console.log('hook-listener', { open, event, data });\r\n        };\r\n        bridge.addListener(listener);\r\n        return () => {\r\n            bridge.removeListener(listener);\r\n        };\r\n    }, [bridge]);\r\n    return state;\r\n};\n\n// type InternalListener = <T>(event: CMMouseEvent, data: T) => void;\r\nclass ContextMenuBridge {\r\n    constructor(defaultData) {\r\n        this.clickPosition = { x: 0, y: 0 };\r\n        this.open = false;\r\n        this.hookListeners = [];\r\n        this.addListener = (listener) => {\r\n            this.hookListeners.push(listener);\r\n            return true;\r\n        };\r\n        this.removeListener = (listener) => {\r\n            const index = this.hookListeners.indexOf(listener);\r\n            if (index === -1)\r\n                return false;\r\n            this.hookListeners.splice(index, 1);\r\n            return true;\r\n        };\r\n        this.menuListener = (event, data, open) => {\r\n            // noop\r\n        };\r\n        this.dispatch = (event) => {\r\n            this.hookListeners.forEach((handler) => { handler(event, this.data, this.open); });\r\n            this.menuListener(event, this.data, this.open);\r\n        };\r\n        this.handleOpen = (event, data) => {\r\n            if (event.defaultPrevented)\r\n                return;\r\n            event.preventDefault();\r\n            // console.log('bridgeOpenEvent', event, data, this.hookListeners.length);\r\n            this.data = data;\r\n            this.open = true;\r\n            this.clickPosition = { x: event.pageX, y: event.pageY };\r\n            this.dispatch(event);\r\n        };\r\n        this.handleClose = (event) => {\r\n            if (event.defaultPrevented)\r\n                return;\r\n            // console.log('bridgeCloseEvent', event, this.hookListeners.length);\r\n            this.data = this.defaultData;\r\n            this.open = false;\r\n            this.dispatch(event);\r\n        };\r\n        this.forceClose = (event) => {\r\n            // console.log('bridgeForceCloseEvent', event, this.hookListeners.length);\r\n            this.data = this.defaultData;\r\n            this.open = false;\r\n            this.dispatch(event);\r\n        };\r\n        this.defaultData = defaultData;\r\n        this.data = defaultData;\r\n    }\r\n}\r\nconst createBridge = (data) => (new ContextMenuBridge(data));\n\nconst CMContext = createContext({\r\n    doClose: () => {\r\n        // do something\r\n    },\r\n    doSelect: () => {\r\n        // do something\r\n    },\r\n    bridge: new ContextMenuBridge({}),\r\n    dark: false,\r\n});\r\nconst ContextMenuOption = ({ children, href, onClick, select, disabled, }) => {\r\n    const { doClose, doSelect } = useContext(CMContext);\r\n    const handleClick = (e) => {\r\n        e.preventDefault();\r\n        if (disabled)\r\n            return;\r\n        if (select) {\r\n            doSelect(select, e);\r\n            doClose(e);\r\n        }\r\n        if (onClick) {\r\n            onClick(e);\r\n            doClose(e);\r\n        }\r\n    };\r\n    return (jsx(\"a\", { onClick: handleClick, onContextMenu: handleClick, href: href || '#', className: `react-context-menu-option ${disabled ? 'disabled' : 'active'}`, \"aria-label\": \"link\", children: children }, void 0));\r\n};\r\nContextMenuOption.defaultProps = {\r\n    href: undefined,\r\n    onClick: undefined,\r\n    select: undefined,\r\n    disabled: false,\r\n};\n\nconst ContextMenuDivider = () => (jsx(\"div\", { className: \"react-context-menu-divider\" }, void 0));\n\n// eslint-disable-next-line react/require-default-props\r\nconst ContextMenuExpand = ({ children, style = {}, onSelect, text, }) => {\r\n    const { bridge, dark } = useContext(CMContext);\r\n    const optionRef = useRef(null);\r\n    const menuRef = useRef(null);\r\n    const [relativePosition, setRelativePosition] = useState({ x: 0, y: 0 });\r\n    const [expanded, setExpanded] = useState(false);\r\n    useLayoutEffect(() => {\r\n        if (!expanded || !optionRef.current || !menuRef.current)\r\n            return;\r\n        const optionRect = optionRef.current.getBoundingClientRect();\r\n        const menuRect = menuRef.current.getBoundingClientRect();\r\n        const canGoRight = window.innerWidth - optionRect.right > menuRect.width;\r\n        const canGoDown = window.innerHeight - optionRect.top > menuRect.height;\r\n        const x = canGoRight\r\n            ? optionRect.width\r\n            : -optionRect.width;\r\n        const y = canGoDown\r\n            ? 0\r\n            : window.innerHeight - menuRect.height - optionRect.top - 10;\r\n        setRelativePosition({ x, y });\r\n    }, [expanded]);\r\n    const styles = Object.assign(Object.assign({}, style), { display: expanded ? 'block' : 'none', top: relativePosition.y, left: relativePosition.x });\r\n    return (jsx(CMContext.Provider, Object.assign({ value: {\r\n            doClose: (e) => {\r\n                bridge.forceClose(e);\r\n            },\r\n            doSelect: (action, event) => {\r\n                if (onSelect)\r\n                    onSelect(action, event);\r\n            },\r\n            bridge,\r\n            dark,\r\n        } }, { children: jsxs(\"div\", Object.assign({ onMouseEnter: () => { setExpanded(true); }, onMouseLeave: () => { setExpanded(false); }, className: \"react-context-menu-option active expand-option\", ref: optionRef, style: { position: 'relative' } }, { children: [text, jsx(\"span\", Object.assign({ style: {\r\n                        position: 'absolute', right: '0.5rem', top: '0.4rem', fontSize: '0.5rem',\r\n                    } }, { children: \"\\u25B6\" }), void 0), jsx(\"div\", Object.assign({ className: `react-context-menu expand-menu${dark ? ' theme-dark' : 'theme-light'}`, ref: menuRef, style: styles }, { children: children }), void 0)] }), void 0) }), void 0));\r\n};\r\nContextMenuExpand.defaultProps = {\r\n    style: {},\r\n    onSelect: undefined,\r\n};\n\nconst getYDirection = (menuRect, clickPosition) => {\r\n    if (window.innerHeight + window.pageYOffset - clickPosition.y > menuRect.height)\r\n        return 'down';\r\n    if (clickPosition.y - window.pageYOffset > menuRect.height)\r\n        return 'up';\r\n    return 'center';\r\n};\r\nconst getXDirection = (menuRect, clickPosition) => {\r\n    if (window.innerWidth + window.pageXOffset - clickPosition.x > menuRect.width)\r\n        return 'right';\r\n    return 'left';\r\n};\r\n// eslint-disable-next-line react/require-default-props\r\nfunction ContextMenu({ children, style = {}, bridge, dark = false, onSelect, }) {\r\n    const menuRef = useRef(null);\r\n    const { clickPosition, open } = useContextMenu(bridge);\r\n    const anchorRef = useRef(null);\r\n    const [relativePosition, setRelativePosition] = useState({ x: 0, y: 0 });\r\n    // eslint-disable-next-line consistent-return\r\n    useEffect(() => {\r\n        if (open) {\r\n            const handleOutsideClick = (e) => {\r\n                if (open\r\n                    && menuRef.current\r\n                    && e.target && e.target instanceof Element && !menuRef.current.contains(e.target)) {\r\n                    bridge.handleClose(e);\r\n                }\r\n            };\r\n            document.addEventListener('mousedown', handleOutsideClick);\r\n            return () => {\r\n                document.removeEventListener('mousedown', handleOutsideClick);\r\n            };\r\n        }\r\n    }, [open]);\r\n    useLayoutEffect(() => {\r\n        if (!open)\r\n            return;\r\n        if (!anchorRef.current || !menuRef.current)\r\n            return;\r\n        const anchorRect = anchorRef.current.getBoundingClientRect();\r\n        const menuRect = menuRef.current.getBoundingClientRect();\r\n        const xDir = getXDirection(menuRect, clickPosition);\r\n        const yDir = getYDirection(menuRect, clickPosition);\r\n        const x = xDir === 'right'\r\n            ? clickPosition.x - window.pageXOffset - anchorRect.left\r\n            : clickPosition.x - window.pageXOffset - anchorRect.left - menuRect.width;\r\n        // eslint-disable-next-line no-nested-ternary\r\n        const y = yDir === 'down'\r\n            ? clickPosition.y - window.pageYOffset - anchorRect.top\r\n            : yDir === 'up'\r\n                ? clickPosition.y - window.pageYOffset - anchorRect.top - menuRect.height\r\n                : window.innerHeight - menuRect.height - (anchorRect.top) - 10;\r\n        setRelativePosition({ x, y });\r\n    }, [clickPosition, open]);\r\n    const styles = Object.assign(Object.assign({}, style), {\r\n        display: open ? 'block' : 'none',\r\n        top: relativePosition.y,\r\n        left: relativePosition.x,\r\n        anchored: false,\r\n    });\r\n    const doSelect = (action, event) => {\r\n        if (onSelect)\r\n            onSelect(action, event);\r\n    };\r\n    const doClose = (e) => {\r\n        bridge.forceClose(e);\r\n    };\r\n    return (jsx(CMContext.Provider, Object.assign({ value: {\r\n            doClose,\r\n            doSelect,\r\n            bridge,\r\n            dark,\r\n        } }, { children: jsx(\"div\", Object.assign({ className: \"react-context-menu-anchor\", ref: anchorRef }, { children: jsx(\"div\", { className: `react-context-menu${dark ? ' theme-dark' : ''}`, style: styles, ref: menuRef, children: children, onContextMenu: (e) => { e.preventDefault(); } }, void 0) }), void 0) }), void 0));\r\n}\r\nContextMenu.defaultProps = {\r\n    style: {},\r\n    dark: false,\r\n    onSelect: undefined,\r\n};\r\nContextMenu.Option = ContextMenuOption;\r\nContextMenu.Divider = ContextMenuDivider;\r\nContextMenu.Expand = ContextMenuExpand;\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\n\nconst ContextMenuTriggerArea = (props) => {\r\n    const { children, data, bridge } = props, other = __rest(props, [\"children\", \"data\", \"bridge\"]);\r\n    return (jsx(\"div\", Object.assign({}, other, { onContextMenu: (e) => {\r\n            // console.log('trigger', data);\r\n            if (bridge)\r\n                bridge.handleOpen(e, data);\r\n        }, children: children }), void 0));\r\n};\n\nexport default ContextMenu;\nexport { ContextMenu, ContextMenuBridge, ContextMenuTriggerArea, createBridge, useContextMenu };\n","import { createBridge } from 'react-context-menu-hooks';\r\n\r\nexport interface MyContextMenuTriggerData {\r\n  changeColor: (color: string) => void;\r\n  color: string;\r\n  changeShape: (shape: string) => void;\r\n  shape: string;\r\n}\r\n\r\nexport const myContextMenuBridge = createBridge<MyContextMenuTriggerData>({\r\n  changeColor: () => { /* do nothing */ },\r\n  color: 'none',\r\n  changeShape: () => { /* do nothing */ },\r\n  shape: 'none',\r\n});\r\n","import React, { useState } from 'react';\r\nimport { ContextMenu, useContextMenu } from 'react-context-menu-hooks';\r\n\r\nimport { myContextMenuBridge } from './myContextMenuBridge';\r\n\r\ntype NaiveClipboardData = {\r\n  color: string,\r\n  shape: string,\r\n} | undefined;\r\n\r\nfunction MyContextMenu():JSX.Element {\r\n  const [clipboard, setClipboard] = useState<NaiveClipboardData>();\r\n  const { data } = useContextMenu(myContextMenuBridge);\r\n  const {\r\n    changeColor, changeShape, color, shape,\r\n  } = data;\r\n\r\n  const handleColorSelect = (action: string) => { changeColor(action); };\r\n  const handleShapeSelect = (action: string) => { changeShape(action); };\r\n  const handlePaste = () => {\r\n    if (!clipboard) return;\r\n    changeColor(clipboard.color);\r\n    changeShape(clipboard.shape);\r\n  };\r\n  const handleCopy = () => {\r\n    setClipboard({ color, shape });\r\n  };\r\n  const handleReset = () => {\r\n    changeColor('blue');\r\n    changeShape('circle');\r\n  };\r\n  const darkMode: boolean = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;\r\n\r\n  return (\r\n    <ContextMenu dark={darkMode} bridge={myContextMenuBridge}>\r\n      <ContextMenu.Option onClick={handleCopy}>Copy Shape Styles</ContextMenu.Option>\r\n      <ContextMenu.Option disabled={!clipboard} onClick={handlePaste}>\r\n        Paste Shape Styles\r\n      </ContextMenu.Option>\r\n      <ContextMenu.Divider />\r\n      <ContextMenu.Option onClick={handleReset}>Reset Shape</ContextMenu.Option>\r\n      <ContextMenu.Divider />\r\n      <ContextMenu.Expand text=\"Change Color...\" onSelect={handleColorSelect}>\r\n        <ContextMenu.Option disabled={color === 'yellow'} select=\"yellow\">Change to Yellow</ContextMenu.Option>\r\n        <ContextMenu.Option disabled={color === 'green'} select=\"green\">Change to Green</ContextMenu.Option>\r\n        <ContextMenu.Option disabled={color === 'red'} select=\"red\">Change to Red</ContextMenu.Option>\r\n        <ContextMenu.Option disabled={color === 'blue'} select=\"blue\">Change to Blue</ContextMenu.Option>\r\n      </ContextMenu.Expand>\r\n      <ContextMenu.Expand text=\"Change Shape\" onSelect={handleShapeSelect}>\r\n        <ContextMenu.Option disabled={shape === 'square'} select=\"square\">Change to Square</ContextMenu.Option>\r\n        <ContextMenu.Option disabled={shape === 'circle'} select=\"circle\">Change to Circle</ContextMenu.Option>\r\n      </ContextMenu.Expand>\r\n    </ContextMenu>\r\n  );\r\n}\r\n\r\nexport default MyContextMenu;\r\n","import React, { useState } from 'react';\nimport { ContextMenuTriggerArea } from 'react-context-menu-hooks';\nimport '../node_modules/react-context-menu-hooks/src/ContextMenu.css';\n\nimport './App.css';\n\nimport MyContextMenu from './MyContextMenu';\nimport { myContextMenuBridge } from './myContextMenuBridge';\n\nconst Shape = () => {\n  const [color, setColor] = useState<string>('blue');\n  const [shape, setShape] = useState<string>('circle');\n\n  return (\n    <ContextMenuTriggerArea\n      bridge={myContextMenuBridge}\n      className={`shape ${color} ${shape}`}\n      data={{\n        color,\n        changeColor: (newColor) => {\n          setColor(newColor);\n        },\n        shape,\n        changeShape: (newColor) => {\n          setShape(newColor);\n        },\n      }}\n    >\n      <p>Right click and change how I look!</p>\n    </ContextMenuTriggerArea>\n  );\n};\n\nfunction App():JSX.Element {\n  return (\n    <div className=\"App\">\n      <h1>react-context-menu-hooks example</h1>\n      <MyContextMenu />\n      <div>\n        <Shape />\n        <Shape />\n      </div>\n      <div>\n        <Shape />\n        <Shape />\n      </div>\n      <p>\n        Check out the\n        {' '}\n        <a href=\"https://github.com/JazzBrown1/react-context-menu-hooks\" rel=\"noreferrer\" target=\"_blank\">\n          Github\n        </a>\n      </p>\n      <p>\n        The example source code available\n        {' '}\n        <a href=\"https://github.com/JazzBrown1/react-context-menu-hooks/tree/main/example\" rel=\"noreferrer\" target=\"_blank\">\n          here\n        </a>\n      </p>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({\n      getCLS, getFID, getFCP, getLCP, getTTFB,\n    }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(// console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}