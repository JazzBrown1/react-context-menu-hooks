{"version":3,"sources":["../../dist/lib.js","myContextMenuBridge.ts","MyContextMenu.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["useContextMenu","bridge","useState","data","defaultData","clickPosition","x","y","open","state","setState","useEffect","listener","event","pageX","pageY","console","log","addListener","removeListener","ContextMenuBridge","this","hookListeners","push","index","indexOf","splice","menuListener","dispatch","forEach","handler","handleOpen","defaultPrevented","preventDefault","length","handleClose","forceClose","CMContext","createContext","doClose","doSelect","dark","ContextMenuOption","children","href","onClick","select","disabled","useContext","handleClick","e","jsx","onContextMenu","className","defaultProps","undefined","ContextMenuExpand","style","onSelect","text","optionRef","useRef","menuRef","relativePosition","setRelativePosition","expanded","setExpanded","useLayoutEffect","current","optionRect","getBoundingClientRect","menuRect","canGoRight","window","innerWidth","right","width","canGoDown","innerHeight","top","height","styles","Object","assign","display","left","Provider","value","action","jsxs","onMouseEnter","onMouseLeave","ref","position","fontSize","ContextMenu","anchored","anchorRef","handleOutsideClick","target","Element","contains","document","addEventListener","removeEventListener","anchorRect","canGoUp","Option","Divider","Expand","ContextMenuTriggerArea","props","other","s","t","p","prototype","hasOwnProperty","call","getOwnPropertySymbols","i","propertyIsEnumerable","__rest","myContextMenuBridge","changeColor","color","changeShape","shape","MyContextMenu","clipboard","setClipboard","Shape","setColor","setShape","newColor","App","rel","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.5b88d3e9.chunk.js","sourcesContent":["import { jsx, jsxs } from 'react/jsx-runtime';\nimport { useState, useEffect, createContext, useContext, useRef, useLayoutEffect } from 'react';\n\nconst useContextMenu = (bridge) => {\r\n    const [state, setState] = useState({\r\n        data: bridge.defaultData,\r\n        clickPosition: { x: 0, y: 0 },\r\n        open: false,\r\n    });\r\n    useEffect(() => {\r\n        // eslint-disable-next-line no-param-reassign\r\n        const listener = (event, data, open) => {\r\n            const clickPosition = { x: event.pageX, y: event.pageY };\r\n            setState({ data, clickPosition, open });\r\n            console.log('hook-listener', { open, event, data });\r\n        };\r\n        bridge.addListener(listener);\r\n        return () => {\r\n            bridge.removeListener(listener);\r\n        };\r\n    }, [bridge]);\r\n    return state;\r\n};\n\n// type InternalListener = <T>(event: CMMouseEvent, data: T) => void;\r\nclass ContextMenuBridge {\r\n    constructor(defaultData) {\r\n        this.clickPosition = { x: 0, y: 0 };\r\n        this.open = false;\r\n        this.hookListeners = [];\r\n        this.addListener = (listener) => {\r\n            this.hookListeners.push(listener);\r\n            return true;\r\n        };\r\n        this.removeListener = (listener) => {\r\n            const index = this.hookListeners.indexOf(listener);\r\n            if (index === -1)\r\n                return false;\r\n            this.hookListeners.splice(index, 1);\r\n            return true;\r\n        };\r\n        this.menuListener = (event, data, open) => {\r\n            // noop\r\n        };\r\n        this.dispatch = (event) => {\r\n            this.hookListeners.forEach((handler) => { handler(event, this.data, this.open); });\r\n            this.menuListener(event, this.data, this.open);\r\n        };\r\n        this.handleOpen = (event, data) => {\r\n            if (event.defaultPrevented)\r\n                return;\r\n            event.preventDefault();\r\n            console.log('bridgeOpenEvent', event, data, this.hookListeners.length);\r\n            this.data = data;\r\n            this.open = true;\r\n            this.clickPosition = { x: event.pageX, y: event.pageY };\r\n            this.dispatch(event);\r\n        };\r\n        this.handleClose = (event) => {\r\n            if (event.defaultPrevented)\r\n                return;\r\n            console.log('bridgeCloseEvent', event, this.hookListeners.length);\r\n            this.data = this.defaultData;\r\n            this.open = false;\r\n            this.dispatch(event);\r\n        };\r\n        this.forceClose = (event) => {\r\n            console.log('bridgeForceCloseEvent', event, this.hookListeners.length);\r\n            this.data = this.defaultData;\r\n            this.open = false;\r\n            this.dispatch(event);\r\n        };\r\n        this.defaultData = defaultData;\r\n        this.data = defaultData;\r\n    }\r\n}\r\nconst createBridge = (data) => (new ContextMenuBridge(data));\n\nconst CMContext = createContext({\r\n    doClose: () => {\r\n        // do something\r\n    },\r\n    doSelect: () => {\r\n        // do something\r\n    },\r\n    bridge: new ContextMenuBridge({}),\r\n    dark: false,\r\n});\r\nconst ContextMenuOption = ({ children, href, onClick, select, disabled, }) => {\r\n    const { doClose, doSelect } = useContext(CMContext);\r\n    const handleClick = (e) => {\r\n        e.preventDefault();\r\n        if (disabled)\r\n            return;\r\n        if (select) {\r\n            doSelect(select, e);\r\n            doClose(e);\r\n        }\r\n        if (onClick) {\r\n            onClick(e);\r\n            doClose(e);\r\n        }\r\n    };\r\n    return (jsx(\"a\", { onClick: handleClick, onContextMenu: handleClick, href: href || '#', className: `react-context-menu-option ${disabled ? 'disabled' : 'active'}`, \"aria-label\": \"link\", children: children }, void 0));\r\n};\r\nContextMenuOption.defaultProps = {\r\n    href: undefined,\r\n    onClick: undefined,\r\n    select: undefined,\r\n    disabled: false,\r\n};\n\nconst ContextMenuDivider = () => (jsx(\"div\", { className: \"react-context-menu-divider\" }, void 0));\n\n// eslint-disable-next-line react/require-default-props\r\nconst ContextMenuExpand = ({ children, style = {}, onSelect, text, }) => {\r\n    const { bridge, dark } = useContext(CMContext);\r\n    const optionRef = useRef(null);\r\n    const menuRef = useRef(null);\r\n    const [relativePosition, setRelativePosition] = useState({ x: 0, y: 0 });\r\n    const [expanded, setExpanded] = useState(false);\r\n    useLayoutEffect(() => {\r\n        if (!expanded || !optionRef.current || !menuRef.current)\r\n            return;\r\n        const optionRect = optionRef.current.getBoundingClientRect();\r\n        const menuRect = menuRef.current.getBoundingClientRect();\r\n        const canGoRight = window.innerWidth - optionRect.right > menuRect.width;\r\n        const canGoDown = window.innerHeight - optionRect.top > menuRect.height;\r\n        const x = canGoRight\r\n            ? optionRect.width\r\n            : -optionRect.width;\r\n        const y = canGoDown\r\n            ? 0\r\n            : window.innerHeight - menuRect.height - optionRect.top - 10;\r\n        // console.log('expand', canGoDown, window.innerHeight, menuRect.height, optionRect.top, y);\r\n        setRelativePosition({ x, y });\r\n    }, [expanded]);\r\n    const styles = Object.assign(Object.assign({}, style), { display: expanded ? 'block' : 'none', top: relativePosition.y, left: relativePosition.x });\r\n    return (jsx(CMContext.Provider, Object.assign({ value: {\r\n            doClose: (e) => {\r\n                bridge.forceClose(e);\r\n            },\r\n            doSelect: (action, event) => {\r\n                if (onSelect)\r\n                    onSelect(action, event);\r\n            },\r\n            bridge,\r\n            dark,\r\n        } }, { children: jsxs(\"div\", Object.assign({ onMouseEnter: () => { setExpanded(true); }, onMouseLeave: () => { setExpanded(false); }, className: \"react-context-menu-option active expand-option\", ref: optionRef, style: { position: 'relative' } }, { children: [text, jsx(\"span\", Object.assign({ style: {\r\n                        position: 'absolute', right: '0.5rem', top: '0.4rem', fontSize: '0.5rem',\r\n                    } }, { children: \"\\u25B6\" }), void 0), jsx(\"div\", Object.assign({ className: `react-context-menu expand-menu${dark ? ' theme-dark' : 'theme-light'}`, ref: menuRef, style: styles }, { children: children }), void 0)] }), void 0) }), void 0));\r\n};\r\nContextMenuExpand.defaultProps = {\r\n    style: {},\r\n    onSelect: undefined,\r\n};\n\n// eslint-disable-next-line react/require-default-props\r\nfunction ContextMenu({ children, style = {}, bridge, dark = false, onSelect, anchored, }) {\r\n    const menuRef = useRef(null);\r\n    const { clickPosition, open } = useContextMenu(bridge);\r\n    const anchorRef = useRef(null);\r\n    const [relativePosition, setRelativePosition] = useState({ x: 0, y: 0 });\r\n    // eslint-disable-next-line consistent-return\r\n    useEffect(() => {\r\n        if (open) {\r\n            const handleOutsideClick = (e) => {\r\n                if (open\r\n                    && menuRef.current\r\n                    && e.target && e.target instanceof Element && !menuRef.current.contains(e.target)) {\r\n                    bridge.handleClose(e);\r\n                }\r\n            };\r\n            document.addEventListener('mousedown', handleOutsideClick);\r\n            return () => {\r\n                document.removeEventListener('mousedown', handleOutsideClick);\r\n            };\r\n        }\r\n    }, [open]);\r\n    useLayoutEffect(() => {\r\n        if (!open)\r\n            return;\r\n        if (!anchored) {\r\n            setRelativePosition(clickPosition);\r\n            return;\r\n        }\r\n        if (!anchorRef.current || !menuRef.current)\r\n            return;\r\n        const anchorRect = anchorRef.current.getBoundingClientRect();\r\n        const menuRect = menuRef.current.getBoundingClientRect();\r\n        const canGoRight = window.innerWidth - clickPosition.x > menuRect.width;\r\n        const canGoDown = window.innerHeight - clickPosition.y > menuRect.height;\r\n        const canGoUp = clickPosition.y > menuRect.height;\r\n        const x = canGoRight\r\n            ? clickPosition.x - anchorRect.left\r\n            : clickPosition.x - anchorRect.left - menuRect.width;\r\n        // eslint-disable-next-line no-nested-ternary\r\n        const y = canGoDown\r\n            ? clickPosition.y - anchorRect.top\r\n            : (canGoUp\r\n                ? clickPosition.y - anchorRect.top - menuRect.height\r\n                : window.innerHeight - menuRect.height - anchorRect.top - 10);\r\n        setRelativePosition({ x, y });\r\n    }, [clickPosition, open]);\r\n    const styles = Object.assign(Object.assign({}, style), {\r\n        display: open ? 'block' : 'none',\r\n        top: relativePosition.y,\r\n        left: relativePosition.x,\r\n        anchored: false,\r\n    });\r\n    const doSelect = (action, event) => {\r\n        if (onSelect)\r\n            onSelect(action, event);\r\n    };\r\n    const doClose = (e) => {\r\n        bridge.forceClose(e);\r\n    };\r\n    return (jsx(CMContext.Provider, Object.assign({ value: {\r\n            doClose,\r\n            doSelect,\r\n            bridge,\r\n            dark,\r\n        } }, { children: jsx(\"div\", Object.assign({ className: \"react-context-menu-anchor\", ref: anchorRef }, { children: jsx(\"div\", { className: `react-context-menu${dark ? ' theme-dark' : ''}`, style: styles, ref: menuRef, children: children, onContextMenu: (e) => { e.preventDefault(); } }, void 0) }), void 0) }), void 0));\r\n}\r\nContextMenu.defaultProps = {\r\n    style: {},\r\n    dark: false,\r\n    onSelect: undefined,\r\n    anchored: true,\r\n};\r\nContextMenu.Option = ContextMenuOption;\r\nContextMenu.Divider = ContextMenuDivider;\r\nContextMenu.Expand = ContextMenuExpand;\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\n\nconst ContextMenuTriggerArea = (props) => {\r\n    const { children, data, bridge } = props, other = __rest(props, [\"children\", \"data\", \"bridge\"]);\r\n    return (jsx(\"div\", Object.assign({}, other, { onContextMenu: (e) => {\r\n            console.log('trigger', data);\r\n            if (bridge)\r\n                bridge.handleOpen(e, data);\r\n        }, children: children }), void 0));\r\n};\n\nexport default ContextMenu;\nexport { ContextMenu, ContextMenuBridge, ContextMenuTriggerArea, createBridge, useContextMenu };\n","import { createBridge } from 'react-context-menu-hooks';\r\n\r\nexport interface MyContextMenuTriggerData {\r\n  changeColor: (color: string) => void;\r\n  color: string;\r\n  changeShape: (shape: string) => void;\r\n  shape: string;\r\n}\r\n\r\nexport const myContextMenuBridge = createBridge<MyContextMenuTriggerData>({\r\n  changeColor: () => { /* do nothing */ },\r\n  color: 'none',\r\n  changeShape: () => { /* do nothing */ },\r\n  shape: 'none',\r\n});\r\n","import React, { useState } from 'react';\r\nimport { ContextMenu, useContextMenu } from 'react-context-menu-hooks';\r\n\r\nimport { myContextMenuBridge } from './myContextMenuBridge';\r\n\r\ntype NaiveClipboardData = {\r\n  color: string,\r\n  shape: string,\r\n} | undefined;\r\n\r\nfunction MyContextMenu():JSX.Element {\r\n  const [clipboard, setClipboard] = useState<NaiveClipboardData>();\r\n  const { data } = useContextMenu(myContextMenuBridge);\r\n  const {\r\n    changeColor, changeShape, color, shape,\r\n  } = data;\r\n\r\n  const handleColorSelect = (action: string) => { changeColor(action); };\r\n  const handleShapeSelect = (action: string) => { changeShape(action); };\r\n  const handlePaste = () => {\r\n    if (!clipboard) return;\r\n    changeColor(clipboard.color);\r\n    changeShape(clipboard.shape);\r\n  };\r\n  const handleCopy = () => {\r\n    setClipboard({ color, shape });\r\n  };\r\n  const handleReset = () => {\r\n    changeColor('blue');\r\n    changeShape('circle');\r\n  };\r\n\r\n  return (\r\n    <ContextMenu dark bridge={myContextMenuBridge}>\r\n      <ContextMenu.Option onClick={handleCopy}>Copy Shape Styles</ContextMenu.Option>\r\n      <ContextMenu.Option disabled={!clipboard} onClick={handlePaste}>\r\n        Paste Shape Styles\r\n      </ContextMenu.Option>\r\n      <ContextMenu.Divider />\r\n      <ContextMenu.Option onClick={handleReset}>Reset Shape</ContextMenu.Option>\r\n      <ContextMenu.Divider />\r\n      <ContextMenu.Expand text=\"Change Color...\" onSelect={handleColorSelect}>\r\n        <ContextMenu.Option disabled={color === 'yellow'} select=\"yellow\">Change to Yellow</ContextMenu.Option>\r\n        <ContextMenu.Option disabled={color === 'green'} select=\"green\">Change to Green</ContextMenu.Option>\r\n        <ContextMenu.Option disabled={color === 'red'} select=\"red\">Change to Red</ContextMenu.Option>\r\n        <ContextMenu.Option disabled={color === 'blue'} select=\"blue\">Change to Blue</ContextMenu.Option>\r\n      </ContextMenu.Expand>\r\n      <ContextMenu.Expand text=\"Change Shape\" onSelect={handleShapeSelect}>\r\n        <ContextMenu.Option disabled={shape === 'square'} select=\"square\">Change to Square</ContextMenu.Option>\r\n        <ContextMenu.Option disabled={shape === 'circle'} select=\"circle\">Change to Circle</ContextMenu.Option>\r\n      </ContextMenu.Expand>\r\n    </ContextMenu>\r\n  );\r\n}\r\n\r\nexport default MyContextMenu;\r\n","import React, { useState } from 'react';\nimport { ContextMenuTriggerArea } from 'react-context-menu-hooks';\nimport '../node_modules/react-context-menu-hooks/src/ContextMenu.css';\n\nimport './App.css';\n\nimport MyContextMenu from './MyContextMenu';\nimport { myContextMenuBridge } from './myContextMenuBridge';\n\nconst Shape = () => {\n  const [color, setColor] = useState<string>('blue');\n  const [shape, setShape] = useState<string>('circle');\n\n  return (\n    <ContextMenuTriggerArea\n      bridge={myContextMenuBridge}\n      className={`shape ${color} ${shape}`}\n      data={{\n        color,\n        changeColor: (newColor) => {\n          setColor(newColor);\n        },\n        shape,\n        changeShape: (newColor) => {\n          setShape(newColor);\n        },\n      }}\n    >\n      <p>Right click and change how I look!</p>\n    </ContextMenuTriggerArea>\n  );\n};\n\nfunction App():JSX.Element {\n  return (\n    <div className=\"App\">\n      <h1>react-context-menu-hooks example</h1>\n      <MyContextMenu />\n      <div>\n        <Shape />\n        <Shape />\n      </div>\n      <div>\n        <Shape />\n        <Shape />\n      </div>\n      <p>\n        Check out the\n        {' '}\n        <a href=\"https://github.com/JazzBrown1/react-context-menu-hooks\" rel=\"noreferrer\" target=\"_blank\">\n          Github\n        </a>\n      </p>\n      <p>\n        The example source code available\n        {' '}\n        <a href=\"https://github.com/JazzBrown1/react-context-menu-hooks/tree/main/example\" rel=\"noreferrer\" target=\"_blank\">\n          here\n        </a>\n      </p>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({\n      getCLS, getFID, getFCP, getLCP, getTTFB,\n    }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}